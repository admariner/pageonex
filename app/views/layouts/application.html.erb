<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= @title %></title>
    <% @title = "PageOneX" %>
    <%= csrf_meta_tags %>
    <%= javascript_include_tag "application" %>
    
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->

    <!-- Le styles -->
    <%= stylesheet_link_tag "application", :media => "all" %>
    <style type="text/css">
      body, p{
        font-family: 'Signika Negative', sans-serif;
      }
    </style>

    <!-- Le fav and touch icons 
    <link href="images/favicon.ico" rel="shortcut icon">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <link href="images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">
    <link href="images/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114">
    -->
  </head>
  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
          <div class="container">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/">PageOneX</a>
          <div class="container nav-collapse">
          <ul class="nav">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Threads<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/threads/" title="">Your Threads</a></li>
                <li><a href="/threads/?a=t" title="">All Threads</a></li>
              </ul>
            </li>
            <li><%= link_to "Blog", "http://montera34.org/pageonex/"  %></li>
            <li><%= link_to "Help", "/home/help"  %></li>
            <li><%= link_to "About", "/home/about"  %></li>        
          </ul>
          

          
          <form class="navbar-search pull-right">
            <input type="text" class="search-query" placeholder="Search">
          </form>
          <% if user_signed_in? %>
            <div class="pull-right" style="border-radius: 4px;padding: 0px 5px 0px 5px;box-shadow: 0px 0px 1px 2px #424242; margin-top: 5px;margin-right: 8px;">
              <h5 style="margin-bottom: -6px;"><%= current_user.username.capitalize %></h5>
              <%= link_to "Sign out", destroy_user_session_path, :method => :delete  %>
            </div>
          <% end %>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container" style="min-width: 1170px;">
      <div class="content">
        <div class="row">
           <div class="span12">

            <% if notice %>
              <div class="alert">
                <a class="close" data-dismiss="alert" href="#">×</a>
                <p><%= notice %></p>
              </div>
            <% elsif alert %>
              <div class="alert alert-error">
                <a class="close" data-dismiss="alert" href="#">×</a>
                <p><%= alert %></p>
              </div>
            <% end %>
            <% if (params[:controller] == "threads" || params[:controller] == "coding")&&(params[:action] != "index"  && params[:action] != "new" && params[:action] != "create")%>
              <ul style="text-align:center; font-size:20px" class="breadcrumb">
                <% if @thread.owner == current_user %>
                  <li id="initiate">
                    <a href="#<% "/threads/#{@thread.thread_name}/edit"%>" class="btn" id="init" rel="popover"  data-content="Editing the thread information" data-original-title="Initiate (Soon)" disabled="disabled" >Initiate</a> <span style="margin:0 100px 0 100px" class="divider"> | </span>
                  </li>
                <% end %>
                <li id="code" class="active">
                  <a href="<%= "/users/#{@thread.owner.username}/threads/#{@thread.thread_name}/coding"%>" class="btn " id="coding" rel="popover"  data-content="Coding images, by highlighting the related news" data-original-title="Code">Code</a> <span style="margin: 0 100px 0 100px" class="divider"> | </span>
                </li>
                <li id="display"><a href="<%= "/users/#{@thread.owner.username}/threads/#{@thread.thread_name}"%>" class="btn " id="disp" rel="popover"  data-content="Displaying the images matrix with bar chart of the ratios" data-original-title="Display">Display</a></li>
              </ul>
            <% end %>

            <%= yield %>
            </div>
            <div class="span2" style="display:none">
              <% if user_signed_in? %>
                <div class="well sidebar-nav">
                <h3><%= current_user.username.capitalize %></h3>
                <%= link_to "Sign out", destroy_user_session_path, :method => :delete  %>
                </div>
              <% end %>
              
              <div class="well sidebar-nav">
                <h3>Opened Threads</h3>
                <ul class="nav nav-list">
                  <!-- <li class="nav-header">International</li> -->
                  <% Threadx.all.each do |t| %>
                    <li><%= link_to t.thread_display_name, "/users/#{t.owner.username}/threads/#{t.thread_name}"  %></li>
                  <% end %>
                </ul>

              </div><!--/.well -->
              <h3>Opened Threads</h3>
              <div id="accordion">
                  <% Threadx.all.each do |t| %>
                  <h3><%= link_to t.thread_display_name, "/users/#{t.owner.username}/threads/#{t.thread_name}"  %></h3>
                    <div>
                      <p><%= t.description %></p>
                      <%= link_to "Open", "/users/#{t.owner.username}/threads/#{t.thread_name}", :class => "btn btn-mini"  %>
                    </div>
                  <% end %>
              </div>
              <% if params[:action] == "process_images" && params[:controller] == "coding" %>
                <div class="alert alert-info">
                  <a id="close_help" type="button" class="close" data-dismiss="alert">×</a>
                  <h3>How coding works</h3>
                  <br>    
                  <h4>Steps</h4>
                  <ol>
                      <li>Drag the mouse over the related news box</li>
                      <li>Release the mouse when you have covered the box</li>
                      <li>If there is nothing to code, you can press the button at the bottom "Nothing to Code"</li>
                  </ol>
                  <h4>Notes</h4>
                  <ul>
                    <li>The progress bar at the top page shows how many images have been coded, and how many is not yet coded</li>
                    <li>You have two highlighted areas to use</li>
                    <li>If you cannot highlight a long news box, you can zoom out and highlight and then zoom in, or you can start with small highlighted area and then resize it</li>
                  </ul>
                </div>
              <% end %>

            </div><!--/span-->
        </div><!--/row-->
      </div><!--/content-->
      <hr> 
      <footer>
        <p>&copy; PageOneX 2012</p>
        <br>
      </footer>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- <link href='http://fonts.googleapis.com/css?family=Cabin:400,500,600,700,400italic' rel='stylesheet' type='text/css'> -->

    <link href='http://fonts.googleapis.com/css?family=Signika+Negative:300,400,600,700' rel='stylesheet' type='text/css'>
    
    

  </body>
</html>

<script type="text/javascript">
$(function () {
  d = { show: 700, hide: 1 }
  $('#init').popover({placement:'bottom', delay:d })
  $('#coding').popover({placement:'bottom',delay:d })
  $('#disp').popover({placement:'bottom',delay:d})
  $( "#accordion" ).accordion({ collapsible: true, active: false });
})



</script>